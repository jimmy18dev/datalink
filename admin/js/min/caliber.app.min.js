function caliberList(e){var i="api.caliber.php",a="";$("#caliber_list").html('<div class="loading"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i>Loading...</div>'),$.ajax({url:i,cache:!1,dataType:"json",type:"GET",data:{calling:"caliber",action:"list_caliber",keyword:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),$.each(e.data.items,function(e,i){a+='<div class="box-items caliber-items" data-id="'+i.caliber_id+'">',a+='<div class="detail">',a+='<div class="name">'+i.caliber_code+i.caliber_family+"</div>",a+='<div class="info"><strong>Stdtime</strong> '+i.caliber_stdtime+" Hrs/K Â· <strong>Route</strong> "+i.route_name+"</div>",a+="</div>",a+='<div class="btn">Edit</div>',"active"!=i.caliber_status&&(a+='<div class="btn enable btn-caliber-enable">Enable</div>'),a+="</div>"}),$("#caliber_list").html(a),a=""}).error()}function routeList(e){var i="api.caliber.php",a="";$.ajax({url:i,cache:!1,dataType:"json",type:"GET",data:{calling:"caliber",action:"list_route",caliber_id:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),$.each(e.data.items,function(e,i){a+='<div class="box-items route-items" data-id="'+i.route_id+'">',a+='<div class="detail">',a+='<div class="name">'+i.route_name+"</div>",a+='<div class="info"><strong>Operation</strong> '+i.route_total_operation+"</div>",a+="</div>",a+='<div class="btn">Edit</div>',a+='<div class="btn enable btn-route-enable">Primary</div>',a+="</div>"}),$("#route_list").html(a),a=""}).error()}function operationList(e){var i="api.caliber.php",a="";$.ajax({url:i,cache:!1,dataType:"json",type:"GET",data:{calling:"caliber",action:"list_operation",route_id:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),$.each(e.data.items,function(e,i){null==i.operation_match_id?(a+='<div class="box-items operation-items -disable">',a+='<div class="detail"><div class="name">'+i.operation_name+'</div><div class="info">Operation ID '+i.operation_id+"</div></div>",a+='<div class="btn">Edit</div>',a+='<div class="btn enable">Add</div>',a+="</div>"):(a+='<div class="box-items operation-items">',a+='<div class="detail"><div class="name">'+i.operation_sort+". "+i.operation_name+" "+i.operation_match_id+'</div><div class="info">Operation ID '+i.operation_id+"</div></div>",a+='<div class="btn">Edit</div>',a+='<div class="btn">Remove</div>',a+="</div>")}),$("#operation_list").html(a),a=""}).error()}function deactiveCaliber(e,i){var a="api.caliber.php",t=confirm("Are you sure you want set this "+i+" to deactive ?");return t?($("#loading-box").fadeIn(300),$.ajax({url:a,cache:!1,dataType:"json",type:"POST",data:{calling:"caliber",action:"setDeactive",caliber_id:e},error:function(){console.log("Request Error")}}).done(function(e){console.log("Return: "+e.message),setTimeout(function(){location.reload()},1e3)}).error(),void 0):!1}var api_caliber="api.caliber.php",api_route="api.route.php",api_operation="api.operation.php";$(document).ready(function(){function e(){$dialogCaliber.fadeOut(300),$filterCaliber.fadeOut(100),$("#caliber_code").val(""),$("#caliber_family").val(""),$("#caliber_description").val(""),$("#caliber_stdtime").val("")}function i(){$dialogRoute.fadeOut(300),$filterRoute.fadeOut(100),$("#route_name").val(""),$("#route_description").val("")}function a(){$dialogOperation.fadeOut(300),$filterOperation.fadeOut(100),$("#operation_name").val(""),$("#operation_description").val("")}var t,o,n;$dialogCaliber=$("#dialogCaliber"),$filterCaliber=$("#filterCaliber"),$btnCreateCaliber=$("#btnCreateCaliber"),$btnCloseCaliber=$("#btnCloseCaliber"),$btnSubmitCaliber=$("#btnSubmitCaliber"),$btnCreateCaliber.click(function(){$dialogCaliber.fadeIn(300),$filterCaliber.fadeIn(100)}),$btnCloseCaliber.click(function(){e()}),$btnSubmitCaliber.click(function(){var i=$("#caliber_code").val(),a=$("#caliber_family").val(),t=$("#caliber_description").val(),o=$("#caliber_stdtime").val();console.log(i,a,t,o),$.ajax({url:api_caliber,cache:!1,dataType:"json",type:"POST",data:{calling:"caliber",action:"create",code:i,description:t,family:a,stdtime:o},error:function(e){console.log(e.responseText)}}).done(function(i){console.log(i),e(),caliberList("")})}),$btnCreateRoute=$("#btnCreateRoute"),$dialogRoute=$("#dialogRoute"),$btnCloseRoute=$("#btnCloseRoute"),$btnSubmitRoute=$("#btnSubmitRoute"),$filterRoute=$("#filterRoute"),$btnCreateRoute.click(function(){$dialogRoute.fadeIn(300),$filterRoute.fadeIn(100)}),$btnCloseRoute.click(function(){i()}),$btnSubmitRoute.click(function(){var e=$("#route_name").val(),a=$("#route_description").val();$.ajax({url:api_route,cache:!1,dataType:"json",type:"POST",data:{calling:"route",action:"create_route",caliber_id:t,name:e,description:a},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),i(),routeList(t)})}),$btnCreateOperation=$("#btnCreateOperation"),$dialogOperation=$("#dialogOperation"),$btnCloseOperation=$("#btnCloseOperation"),$btnSubmitOperation=$("#btnSubmitOperation"),$filterOperation=$("#filterOperation"),$btnCreateOperation.click(function(){$dialogOperation.fadeIn(300),$filterOperation.fadeIn(100)}),$btnCloseOperation.click(function(){a()}),$btnSubmitOperation.click(function(){var e=$("#operation_name").val(),i=$("#operation_description").val();$.ajax({url:api_operation,cache:!1,dataType:"json",type:"POST",data:{calling:"operation",action:"create_operation",name:e,description:i},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),a(),operationList(n)})}),$("#btn-special-list").click(function(){$("#special-list").addClass("-show"),$("#filter").fadeIn(300)}),$("#caliber-search").keyup(function(){caliberList($(this).val())}),caliberList(""),$(".col-container").on("click",".btn-caliber-enable",function(){t=$(this).parent().attr("data-id"),o=$(this).parent().children(".detail").children(".name").html();var e=confirm("Are you sure you want set this "+o+" to Active ?");return e?($.ajax({url:api_caliber,cache:!1,dataType:"json",type:"POST",data:{calling:"caliber",action:"setActive",caliber_id:t},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),caliberList("")}),void 0):!1}),$(".col-container").on("click",".caliber-items",function(){t=$(this).attr("data-id"),$(".caliber-items").removeClass("-active"),$(this).addClass("-active"),console.clear(),console.log("caliber",t),$("#operation_list").html('<div class="intro">OPERATION</div>'),routeList(t)}),$(".col-container").on("click",".route-items",function(){n=$(this).attr("data-id"),$(".route-items").removeClass("-active"),$(this).addClass("-active"),console.clear(),console.log("caliber",t),console.log("route",n),operationList(n)})});